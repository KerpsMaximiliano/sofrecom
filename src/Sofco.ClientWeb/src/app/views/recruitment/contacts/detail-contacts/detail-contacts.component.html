<div class="row wrapper border-bottom white-bg page-heading">
    <div class="col-lg-12">
        <h2> Editar Candidato </h2>
        <ol class="breadcrumb">
            <li>
                <a [routerLink]="['/']">{{'HOME.TITLE' | translate }}</a>
            </li>
            <li>
                Reclutamiento
            </li>
            <li class="active">
                <strong> Editar Candidato </strong>
            </li>
        </ol>
    </div>
</div>
 
<div class="wrapper wrapper-content animated fadeInRight">
    <button type="button" class="btn btn-md btn-success" (click)="back()"> <i class="fa fa-arrow-left"></i> Volver </button>
    <button [disabled]="!form.valid" (click)="save()" class="btn btn-primary" type="button">{{'ACTIONS.save' | translate }} <i class="fa fa-save"></i> </button>

    <div class="tabs-container m-t-md">
        <ul class="nav nav-tabs" role="tablist">
            <li class="active"><a class="nav-link" data-toggle="tab" href="#tab-1"> <i class="fa fa-info-circle"></i> Datos Generales </a></li>
            <li><a class="nav-link" data-toggle="tab" href="#tab-2"> <i class="fa fa-info-circle"></i> Historial contactos </a></li>
        </ul>

        <div class="tab-content">
            <div id="tab-1" class="tab-pane active">
                <div class="panel-body">
                    <form [formGroup]="form">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group" [ngClass]="formsService.getClassProperty(form, 'lastName')">
                                    <label class="control-label">Apellido</label>
                                    <input type="text" class="form-control" formControlName="lastName" maxlength="75">
                        
                                    <div class="form-control-feedback" *ngIf="formsService.hasErrors(form, 'lastName')">
                                        <p *ngIf="formsService.hasError(form, 'lastName', 'required')">El campo es requerido</p>
                                        <p *ngIf="formsService.hasError(form, 'lastName', 'maxlength')">El apellido no puede superar los 75 caracteres</p>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-6">
                                <div class="form-group" [ngClass]="formsService.getClassProperty(form, 'firstName')">
                                    <label class="control-label">Nombres</label>
                                    <input type="text" class="form-control" formControlName="firstName" maxlength="75">
                        
                                    <div class="form-control-feedback" *ngIf="formsService.hasErrors(form, 'firstName')">
                                        <p *ngIf="formsService.hasError(form, 'firstName', 'required')">El campo es requerido</p>
                                        <p *ngIf="formsService.hasError(form, 'firstName', 'maxlength')">Los nombres no pueden superar los 75 caracteres</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="control-label"> Conocimientos </label>
                                    <ng-select [multiple]="true" [closeOnSelect]="false" [items]="skillOptions" bindValue="id" bindLabel="text" formControlName="skills"></ng-select>
                                </div>
                            </div>

                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="control-label"> Perfiles </label>
                                    <ng-select [multiple]="true" [closeOnSelect]="false" [items]="profileOptions" bindValue="id" bindLabel="text" formControlName="profiles"></ng-select>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="control-label"> Cliente </label>
                                    <ng-select [items]="customerOptions" bindValue="id" bindLabel="text" formControlName="clientId"></ng-select>
                                </div>
                            </div>

                            <div class="col-md-6">
                                <div class="form-group" >
                                    <label class="control-label"> Motivo y Causa </label>
                                    <ng-select [items]="reasonOptions" bindValue="id" bindLabel="text" formControlName="reasonCauseId"></ng-select>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-3">
                                <div class="form-group" [ngClass]="formsService.getClassProperty(form, 'countryCode1')">
                                    <label class="control-label">Código pais</label>
                                    <input type="number" class="form-control" formControlName="countryCode1" min="0" max="99" placeholder="54">

                                    <div class="form-control-feedback" *ngIf="formsService.hasErrors(form, 'countryCode1')">
                                        <p *ngIf="formsService.hasError(form, 'countryCode1', 'min')">El codigo no puede ser menor a 0</p>
                                        <p *ngIf="formsService.hasError(form, 'countryCode1', 'max')">El codigo no puede contener mas de 2 caracteres</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="form-group" [ngClass]="formsService.getClassProperty(form, 'areaCode1')">
                                    <label class="control-label">Código area</label>
                                    <input type="number" class="form-control" formControlName="areaCode1" min="0" max="999" placeholder="11">

                                    <div class="form-control-feedback" *ngIf="formsService.hasErrors(form, 'areaCode1')">
                                        <p *ngIf="formsService.hasError(form, 'areaCode1', 'min')">El codigo no puede ser menor a 0</p>
                                        <p *ngIf="formsService.hasError(form, 'areaCode1', 'max')">El codigo no puede contener mas de 3 caracteres</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group" [ngClass]="formsService.getClassProperty(form, 'telephone1')">
                                    <label class="control-label">Teléfono 1</label>
                                    <input type="number" class="form-control" formControlName="telephone1" min="0" max="9999999999">

                                    <div class="form-control-feedback" *ngIf="formsService.hasErrors(form, 'telephone1')">
                                        <p *ngIf="formsService.hasError(form, 'telephone1', 'min')">El telefono no puede ser menor a 0</p>
                                        <p *ngIf="formsService.hasError(form, 'telephone1', 'max')">El telefono no puede contener mas de 10 caracteres</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-3">
                                <div class="form-group" [ngClass]="formsService.getClassProperty(form, 'countryCode2')">
                                    <label class="control-label">Código pais</label>
                                    <input type="number" class="form-control" formControlName="countryCode2" min="0" max="99" placeholder="54">

                                    <div class="form-control-feedback" *ngIf="formsService.hasErrors(form, 'countryCode2')">
                                        <p *ngIf="formsService.hasError(form, 'countryCode2', 'min')">El codigo no puede ser menor a 0</p>
                                        <p *ngIf="formsService.hasError(form, 'countryCode2', 'max')">El codigo no puede contener mas de 2 caracteres</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="form-group" [ngClass]="formsService.getClassProperty(form, 'areaCode2')">
                                    <label class="control-label">Código area</label>
                                    <input type="number" class="form-control" formControlName="areaCode2" min="0" max="999" placeholder="11">

                                    <div class="form-control-feedback" *ngIf="formsService.hasErrors(form, 'areaCode2')">
                                        <p *ngIf="formsService.hasError(form, 'areaCode2', 'min')">El codigo no puede ser menor a 0</p>
                                        <p *ngIf="formsService.hasError(form, 'areaCode2', 'max')">El codigo no puede contener mas de 3 caracteres</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group" [ngClass]="formsService.getClassProperty(form, 'telephone2')">
                                    <label class="control-label">Teléfono 2</label>
                                    <input type="number" class="form-control" formControlName="telephone2" min="0" max="9999999999">

                                    <div class="form-control-feedback" *ngIf="formsService.hasErrors(form, 'telephone2')">
                                        <p *ngIf="formsService.hasError(form, 'telephone2', 'min')">El telefono no puede ser menor a 0</p>
                                        <p *ngIf="formsService.hasError(form, 'telephone2', 'max')">El telefono no puede contener mas de 10 caracteres</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="control-label">Correo electronico</label>
                                    <input type="text" class="form-control" formControlName="email" maxlength="75">
                                </div>
                            </div>

                            <div class="col-md-6">
                                <div class="form-group" >
                                    <label class="control-label"> Recomendado por </label>
                                    <ng-select [items]="userOptions" bindValue="id" bindLabel="text" formControlName="recommendedByUserId"></ng-select>
                                </div>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="control-label">Comentarios</label>
                            <textarea rows="6" class="form-control" formControlName="comments" maxlength="3000"></textarea>
                        </div>
                    </form>
                </div>
            </div>

            <div id="tab-2" class="tab-pane">
                <div class="panel-body">
                    <div class="table-responsive">
                        <table class="table table-striped dataTable table-font" role="grid" id="historyTable">
                            <thead>
                                <tr>
                                    <th class="column-sm">Fecha</th>
                                    <th class="column-md">Razon</th>
                                    <th class="column-lg">Comentarios</th>
                                    <th class="column-lg">Conocimientos</th>
                                    <th class="column-lg">Perfiles</th>
                                    <th class="column-sm">Contactado por</th>
                                    <th class="column-sm">Cliente</th>
                                    <th class="column-sm">Busqueda</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let item of history" class="pointer">
                                    <td class="column-sm">{{ item.date | date:'dd/MM/yyyy' }}</td>
                                    <td class="column-md text-ellipsis">{{ item.reason }}</td>
                                    <td class="column-lg text-word-break">{{ item.comments }}</td>
                                    <td class="column-lg text-word-break">{{ item.skills }}</td>
                                    <td class="column-lg text-word-break">{{ item.profiles }}</td>
                                    <td class="column-sm">{{ item.createdBy }}</td>
                                    <td class="column-sm">{{ item.client }}</td>
                                    <td class="column-sm">#{{ item.jobSearchId }}</td>
                                </tr>
                            </tbody>
                        </table>       
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>