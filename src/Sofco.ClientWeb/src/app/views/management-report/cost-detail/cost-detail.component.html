<div class="table-responsive billing-table">
    <table class="table dataTable" role="grid">
        <thead>
            <tr>
                <th class="first-column"></th>
                <th class="text-center" *ngFor="let month of months">{{ month.display }}</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <th>Total Costos</th>
                <td *ngFor="let month of months; let i = index">
                    <label class="label label-total">
                        {{ calculateTotalCosts(i) | amountFormat }}
                    </label>
                </td>
            </tr>
            <tr>
                <th>Cantidad Recursos costeados</th>
                <td *ngFor="let month of months; let i = index">
                    <label class="label label-cant-resources">
                        {{ calculateAssignedEmployees(i) }}
                    </label>
                </td>
            </tr>
            <tr class="active" *ngFor="let employee of employees">
                <th>{{ employee.display }} </th>
                <td *ngFor="let monthCost of employee.monthsCost; let i = index">
                    <label class="label" (click)="openEditItemModal(monthCost, employee, i)"
                        [ngClass]="AccessEmployeeClass(monthCost)">
                        {{ monthCost.value | amountFormat }}
                    </label>
                </td>
            </tr>
            <tr>
                <th>Total Sueldo</th>
                <td *ngFor="let month of months; let i = index">
                    <label class="label label-salary">
                        {{ calculateAllSalary(i) | amountFormat }}
                    </label>
                </td>
            </tr>
            <tr>
                <th>Cargas (0.51 del sueldo)</th>
                <td *ngFor="let month of months; let i = index">
                    <label class="label label-load">
                        {{ calculateLoads(i) | amountFormat }}
                    </label>
                </td>
            </tr>
            <tr *ngFor="let item of fundedResources; let i = index">
                <th class="first-column">
                    <p>
                        {{ item.display }}
                    </p>
                    <i class="fa fa-2x fa-trash pointer" (click)="deleteResources(item, i)" *ngIf="canDeleteResources(item)"></i>
                </th>
                <td *ngFor="let monthCost of item.monthsCost; let i = index">
                    <label class="label" (click)="openEditItemModal(monthCost, item, i)"
                        [ngClass]="resourcesClass(monthCost, item)">
                        {{ monthCost.value | amountFormat }}
                    </label>
                </td>
            </tr>
        </tbody>
    </table>
</div>

<br>
<div class="row" *ngIf="otherResources.length > 0">
    <div class="col-md-4">
        <select class="form-control" id="otherResourceId" name="otherResourceId" [(ngModel)]="otherResourceId">
            <option [value]="otherResource.typeId" *ngFor="let otherResource of otherResources">
                {{otherResource.typeName}}
            </option>
        </select>
    </div>
    <div class="col-md-4" *ngIf="menuService.hasFunctionality('MANRE', 'EDIT-COST-DETAIL')">
        <button class="btn btn-success btn-sm" type="button" (click)="addOtherCost()">
            Agregar
            <i class="fa fa-plus"></i></button>
    </div>
</div>

<div class="detail-actions m-t-sm text-center" *ngIf="menuService.hasFunctionality('MANRE', 'EDIT-COST-DETAIL')">
    <button class="btn btn-primary cursor-pointer" type="button" (click)="save()">Guardar <i
            class="fa fa-save"></i></button>
</div>

<ng2-modal [config]="editItemModalConfig" #editItemModal (accept)="EditItem()" (close)="EditItemOnClose()"
    [isSaveEnabled]="editItemMonto.valid">

    <div class="row">
        <div class="col-sm-12">
            <div class="form-group">
                <fieldset>
                    <label class="control-label" for="readOnlyInput">Mes</label>
                    <input class="form-control" id="readOnlyInput" type="text" placeholder="{{ monthSelected.display }}"
                        readonly="">
                </fieldset>
            </div>
            <div class="form-group" *ngIf="modalEmployee">
                <label class="control-label">Monto final</label>
                <div class="input-group">
                    <span class="input-group-addon">$</span>
                    <input class="form-control" id="readOnlyInput" type="text"
                        placeholder="{{ editItemMonto.value + editItemMonto.value * editItemAdjustment.value / 100}}"
                        readonly="">
                </div>
            </div>
            <div class="form-group">
                <label class="control-label">Monto</label>
                <div class="input-group">
                    <span class="input-group-addon" *ngIf="!modalPercentage">$</span>
                    <input type="number" decimalFormat class="form-control" [formControl]="editItemMonto">
                    <span class="input-group-addon" *ngIf="modalPercentage">%</span>
                </div>
            </div>
            <div class="form-group" *ngIf="modalEmployee">
                <label class="control-label">% Ajuste</label>
                <div class="input-group">
                    <input type="number" decimalFormat class="form-control" [formControl]="editItemAdjustment">
                    <span class="input-group-addon">%</span>
                </div>
            </div>
        </div>
    </div>
</ng2-modal>