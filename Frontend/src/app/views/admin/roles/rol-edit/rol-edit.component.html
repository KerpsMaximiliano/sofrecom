<div class="row wrapper border-bottom white-bg page-heading">
    <div class="col-lg-12">
        <h2>Roles</h2>
        <ol class="breadcrumb">
            <li>
                <a [routerLink]="['/']">Home</a>
            </li>
            <li>
                <a>Admin</a>
            </li>
            <li>
                <a [routerLink]="['../../']">Roles</a>
            </li>
            <li class="active">
                <strong>Edit</strong>
            </li>
        </ol>
    </div>
    <div class="col-lg-2">

    </div>
</div>


<div class="wrapper wrapper-content animated fadeInRight">
    <div class="row">
        <div class="col-lg-12">
            <div class="ibox float-e-margins">
                <div class="ibox-title">
                    <h5>Editar Rol</h5>

                    <div class="ibox-tools" >
                        <a [routerLink]="['../../']"><i class="fa fa-close"></i></a>
                    </div>

                </div>
                <div class="ibox-content">
                    <form class="form-horizontal" #formRef="ngForm" (ngSubmit)="onSubmit(formRef)">

                        <!--Description-->
                        <div class="form-group"><label class="col-lg-2 control-label">Description</label>
                            <div class="col-lg-10">
                              <input type="text"  
                                  name="description"
                                  class="form-control" 
                                  [(ngModel)]="role.description"
                                  #descripRef="ngModel"
                                  required> 
                              <div class="help-block m-b-none text-danger" [style.visibility]="(!formRef._submitted || !descripRef?.errors?.required) ? 'hidden' : 'visible' ">Description is required</div>

                            </div>
                        </div>

                        <!--ACTIVE-->
                        <!--<div class="form-group">
                            <div class="col-lg-offset-2 col-lg-10">
                                <input icheck type="checkbox" ng-model="main.checkOne"><i></i> Active
                            </div>
                        </div>-->

                        <div class="form-group" *ngIf="role" style="margin-top:-20px; margin-bottom:20px;">
                            <div class="col-lg-12">
                                 <icheck  [(checked)]="role.active"> <!--(click)="onActiveClick($event)"-->
                                     <label class="col-lg-2 control-label icheck-label">Active</label> 
                                 </icheck>
                            </div>
                        </div>

                        <div class="col-sm-10">
                          <!--<div>
                            <label> <input icheck type="checkbox" ng-model="main.checkThree">
                                 Active
                            </label>
                          </div>-->



                            
                        </div>
                        
                        <div class="form-group">
                            <div class="col-lg-offset-2 col-lg-2">
                                <button class="btn btn-sm btn-primary m-t-n-xs" type="submit"><strong>Aceptar</strong></button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <div class="row">

        <!--FUNCIONALIDADES-->
        <!--<div class="col-lg-6">
            <div class="panel panel-primary">
                <div class="panel-heading">
                    <i class="fa fa-info-circle"></i> Funcionalidades
                    <a class="pull-right" (click)="modalFuncs.show()"><i class="fa fa-plus icon-white"></i></a>
                </div>
                <div class="panel-body">
                    <ul class="todo-list m-t small-list">
                        <li *ngFor="let functionality of role.functionalities">
                            <span class="m-l-xs">{{functionality.description}}</span>
                            <a class="pull-right" (click)="unassignFunc(functionality.id)"><i class="check-link fa fa-times icon-danger"></i></a>
                            
                        </li>
                    </ul>
                </div>
            </div>
        </div>-->

        <!--SYSTEM ENTITIES-->
        <div class="col-lg-6">
            <div class="panel panel-primary">
                <div class="panel-heading">
                    <i class="fa fa-info-circle"></i> Entidades
                    <a class="pull-right" (click)="modalEntities.show()"><i class="fa fa-plus icon-white"></i></a>
                </div>
                <div class="panel-body">
                    <ul class="todo-list m-t small-list">
                        <li *ngFor="let e of role.modules">
                            <span class="m-l-xs">{{e.description}}</span>
                            <a class="pull-right" (click)="unassignEntity(e.id)"><i class="check-link fa fa-times icon-danger margin-left-s"></i></a>
                            <a class="pull-right" (click)="addFunctionalities(e.id)"><i class="check-link fa fa-plus icon-success text-smaller"></i></a>
                            
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <!--GRUPOS-->
        <div class="col-lg-6">
            <div class="panel panel-primary">
                <div class="panel-heading">
                    <i class="fa fa-info-circle"></i> Grupos
                </div>
                <div class="panel-body">
                    <ul class="todo-list m-t small-list">
                        <li *ngFor="let group of role.groups">
                            <span class="m-l-xs">{{group.description}}</span>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

    </div>
</div>

<ng2-modal [config]="entitiesModalConfig"  #modalEntities (accept)="assignEntities()"> <!--(accept)="" (cancel)=""-->

    <h4>Seleccione las entidades a ser asignadas al usuario:</h4>

    <div class="scroll">
        <div *ngFor="let g of entitiesToAdd; let i = index"  style="margin-top:10px;">
            <icheck  [checkAtLeft]="checkAtLeft" [(checked)]="entitiesToAdd[i].included" >
                <label style="padding-left:20px;">{{g.text}}</label> 
            </icheck>
        </div>
    </div>

</ng2-modal>

<ng2-modal [config]="funcModalConfig"  #modalFunc (accept)="assignFuncs()"> <!--(accept)="" (cancel)=""-->

    <h4>Seleccione las funcionalidades a ser asignadas al usuario:</h4>

    <div class="scroll" *ngIf="funcsToAdd">
        <div *ngFor="let f of funcsToAdd; let i = index"  style="margin-top:10px;">
            <icheck  [checkAtLeft]="checkAtLeft" [(checked)]="funcsToAdd[i].included" >
                <label style="padding-left:20px;">{{f.text}}</label> 
            </icheck>
        </div>
    </div>

</ng2-modal>